<?xml version="1.0" encoding="utf-8"?>
<addon addon_id="bdTagMe" title="[bd] Tag Me" version_string="1.7.5b" version_id="52" url="" install_callback_class="bdTagMe_Installer" install_callback_method="install" uninstall_callback_class="bdTagMe_Installer" uninstall_callback_method="uninstall">
  <admin_navigation/>
  <admin_permissions/>
  <admin_style_properties/>
  <admin_templates>
    <template title="bdtagme_option_template_registrationDefaults"><![CDATA[<xen:checkbox>
	<xen:option name="{$fieldPrefix}[{$preparedOption.option_id}][bdtagme_email]" selected="{$value.bdtagme_email}">{xen:phrase bdtagme_receive_email_when_tagged}</xen:option>
</xen:checkbox>]]></template>
    <template title="bdtagme_user_group_edit"><![CDATA[<xen:checkboxunit label="" explain="{xen:phrase bdtagme_user_group_is_taggable_explain}">
	<xen:option name="bdTagMe_isTaggable" selected="{$bdTagMe_isTaggable}">
		{xen:phrase bdtagme_user_group_is_taggable}
		{xen:if '{$bdTagMe_isTaggable} AND {$bdTagMe_usersCount} > 0', ' ({xen:phrase bdtagme_members_count}: {xen:number $bdTagMe_usersCount})'}
	</xen:option>
</xen:checkboxunit>]]></template>
  </admin_templates>
  <code_events/>
  <code_event_listeners>
    <listener event_id="file_health_check" execute_order="10" callback_class="bdTagMe_Listener" callback_method="file_health_check" active="1" description=""/>
    <listener event_id="init_dependencies" execute_order="10" callback_class="bdTagMe_Listener" callback_method="init_dependencies" active="1" description=""/>
    <listener event_id="load_class_bb_code" execute_order="10" callback_class="bdTagMe_Listener" callback_method="load_class" active="1" description=""/>
    <listener event_id="load_class_controller" execute_order="10" callback_class="bdTagMe_Listener" callback_method="load_class" active="1" description=""/>
    <listener event_id="load_class_datawriter" execute_order="10" callback_class="bdTagMe_Listener" callback_method="load_class_bdAlerts_XenForo_DataWriter_Alert" active="1" description="Extending bdAlerts_XenForo_DataWriter_Alert"/>
    <listener event_id="load_class_datawriter" execute_order="10" callback_class="bdTagMe_Listener" callback_method="load_class" active="1" description=""/>
    <listener event_id="load_class_model" execute_order="10" callback_class="bdTagMe_Listener" callback_method="load_class" active="1" description=""/>
    <listener event_id="load_class_route_prefix" execute_order="10" callback_class="bdTagMe_Listener" callback_method="load_class" active="1" description=""/>
    <listener event_id="load_class_view" execute_order="10" callback_class="bdTagMe_Listener" callback_method="load_class" active="1" description=""/>
    <listener event_id="template_create" execute_order="10" callback_class="bdTagMe_Listener" callback_method="template_create" active="1" description=""/>
    <listener event_id="template_hook" execute_order="10" callback_class="bdTagMe_Listener" callback_method="template_hook" active="1" description=""/>
    <listener event_id="template_post_render" execute_order="10" callback_class="bdTagMe_Listener" callback_method="template_post_render" active="1" description=""/>
  </code_event_listeners>
  <cron/>
  <email_templates>
    <template title="bdtagme_tagged">
      <subject><![CDATA[{xen:phrase bdtagme_email_tagged_subject, 
	"username={$sender.username}",
	"board_title={$xenOptions.boardTitle}"
}]]></subject>
      <body_text><![CDATA[{xen:phrase bdtagme_email_tagged_text, 
	"receiver_username={$receiver.username}",
	"username={$sender.username}",
	"view_link={$viewLink}",
	"prefs_link={xen:link 'canonical:account/contact-details'}",
	"board_link={xen:link 'canonical:index'}",
	"board_title={$xenOptions.boardTitle}"
}]]></body_text>
      <body_html><![CDATA[<p style="margin-top: 0">{xen:phrase bdtagme_email_tagged_html_1,
	"receiver_username={$receiver.username}",
	'username=<a href="{xen:link canonical:members, $sender}" style="color: #176093; text-decoration: none">{$sender.username}</a>',
	'board_title=<a href="{xen:link canonical:index}" style="color: #176093; text-decoration: none">{$xenOptions.boardTitle}</a>'}</p>

<h2 style="font-size: 18pt; font-weight: normal; margin: 10px 0"><a href="{$viewLink}" style="color: #141414; text-decoration: none">{xen:phrase bdtagme_email_tagged_html_2}<br />
	<span style="color: #176093; font-size: 10px">{$viewLink}</span></a></h2>

<p style="font-size: 11px; color: #969696">{xen:phrase bdtagme_email_tagged_html_footer_1,
	'board_title=<a href="{xen:link canonical:index}" style="color: #969696">{$xenOptions.boardTitle}</a>'}</p>

<p style="font-size: 11px; color: #969696">{xen:phrase bdtagme_email_tagged_html_footer_2,
	'prefs_link={xen:link canonical:account/contact-details}',
	'link_style=color: #969696'}</p>]]></body_html>
    </template>
  </email_templates>
  <optiongroups>
    <group group_id="bdtagme" display_order="9999" debug_only="0"/>
    <option option_id="bdtagme_alertEmail" edit_format="onoff" data_type="unsigned_integer" can_backup="1">
      <default_value>1</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="bdtagme" display_order="20"/>
    </option>
    <option option_id="bdtagme_alertInBatch" edit_format="onoff" data_type="unsigned_integer" can_backup="1">
      <default_value>1</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="bdtagme" display_order="10"/>
    </option>
    <option option_id="bdtagme_maxUsersPerPortion" edit_format="spinbox" data_type="unsigned_integer" can_backup="1">
      <default_value>0</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="bdtagme" display_order="10010"/>
    </option>
    <option option_id="bdtagme_mode" edit_format="radio" data_type="string" can_backup="1">
      <default_value>custom</default_value>
      <edit_format_params>custom = {xen:phrase bdtagme_mode_custom}
url = {xen:phrase bdtagme_mode_url}</edit_format_params>
      <sub_options></sub_options>
      <relation group_id="bdtagme" display_order="1000"/>
      <relation group_id="messageOptions" display_order="9999"/>
    </option>
    <option option_id="bdtagme_mode_custom_tag" edit_format="textbox" data_type="string" can_backup="1">
      <default_value>USER</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="bdtagme" display_order="1010"/>
      <relation group_id="messageOptions" display_order="9999"/>
    </option>
    <option option_id="bdtagme_remove_prefix" edit_format="onoff" data_type="unsigned_integer" can_backup="1">
      <default_value>0</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="bdtagme" display_order="1020"/>
      <relation group_id="messageOptions" display_order="9999"/>
    </option>
    <option option_id="bdtagme_suggestionMaxLength" edit_format="spinbox" data_type="unsigned_integer" can_backup="1">
      <default_value>0</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="bdtagme" display_order="10000"/>
    </option>
    <option option_id="bdtagme_userGroupGravatar" edit_format="textbox" data_type="string" can_backup="1">
      <default_value>bdtagme.usergroup@xfrocks.com</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="bdtagme" display_order="20000"/>
    </option>
  </optiongroups>
  <permissions>
    <permission_groups/>
    <permissions>
      <permission permission_group_id="general" permission_id="bdtagme_groupTag" permission_type="flag" default_value="unset" interface_group_id="generalPermissions" display_order="9999"/>
      <permission permission_group_id="general" permission_id="bdtagme_max" permission_type="integer" default_value_int="0" interface_group_id="generalPermissions" display_order="9999"/>
    </permissions>
    <interface_groups/>
  </permissions>
  <phrases>
    <phrase title="bdtagme_email_tagged_html_1" version_id="40" version_string="1.6.6"><![CDATA[{receiver_username}, {username} tagged you at {board_title}.]]></phrase>
    <phrase title="bdtagme_email_tagged_html_2" version_id="40" version_string="1.6.6"><![CDATA[To view the tagged content, click here]]></phrase>
    <phrase title="bdtagme_email_tagged_html_footer_1" version_id="40" version_string="1.6.6"><![CDATA[This message was sent to you from {board_title} because your preferences are set to receive email when somebody tags you.]]></phrase>
    <phrase title="bdtagme_email_tagged_html_footer_2" version_id="40" version_string="1.6.6"><![CDATA[To stop receiving email, please <a href="{prefs_link}" style="{link_style}">edit your account preferences</a>.]]></phrase>
    <phrase title="bdtagme_email_tagged_subject" version_id="40" version_string="1.6.6"><![CDATA[{username} tagged you at {board_title}]]></phrase>
    <phrase title="bdtagme_email_tagged_text" version_id="40" version_string="1.6.6"><![CDATA[{receiver_username}, {username} tagged you at {board_title}.

To view the tagged content, click here:
{view_link}

----------------------------------------------------------------------

This message was sent to you from {board_title} because your preferences are set to receive email when somebody tags you.

To stop receiving email, please edit your account preferences:
{prefs_link}

{board_link}]]></phrase>
    <phrase title="bdtagme_members_count" version_id="27" version_string="1.6-dev"><![CDATA[Members Count]]></phrase>
    <phrase title="bdtagme_mode_custom" version_id="3" version_string="1.0"><![CDATA[Custom]]></phrase>
    <phrase title="bdtagme_mode_url" version_id="3" version_string="1.0"><![CDATA[URL]]></phrase>
    <phrase title="bdtagme_receive_email_when_tagged" version_id="41" version_string="1.7"><![CDATA[Receive email when name is mentioned]]></phrase>
    <phrase title="bdtagme_receive_email_when_tagged_explain" version_id="40" version_string="1.6.6"><![CDATA[Email notifications for mentions from threads, replies, profile posts, etc.]]></phrase>
    <phrase title="bdtagme_someone_tags_you_in_a_comment_on_a_profile_post" version_id="9" version_string="1.4"><![CDATA[Someone comments on a profile post with you tagged]]></phrase>
    <phrase title="bdtagme_someone_tags_you_in_a_profile_post" version_id="9" version_string="1.4"><![CDATA[Someone tags you in a profile post]]></phrase>
    <phrase title="bdtagme_someone_tags_you_in_a_thread" version_id="9" version_string="1.4"><![CDATA[Someone tags you in a thread]]></phrase>
    <phrase title="bdtagme_tags_you" version_id="3" version_string="1.0"><![CDATA[Tags you]]></phrase>
    <phrase title="bdtagme_tags_you_in_a_comment" version_id="9" version_string="1.4"><![CDATA[Tags you in a comment]]></phrase>
    <phrase title="bdtagme_user_group_is_taggable" version_id="25" version_string="1.5.9"><![CDATA[Is taggable]]></phrase>
    <phrase title="bdtagme_user_group_is_taggable_explain" version_id="27" version_string="1.6-dev"><![CDATA[Check this box to allow people to tag this user group's members using @usergroup syntax. Please note that allowing a group to be taggable will make the group member list available for all to see. It's also not recommended to enable this option for groups that have a lot of members.]]></phrase>
    <phrase title="bdtagme_x_tagged_you_in_a_comment_on_y_profile_page" version_id="8" version_string="1.2.3"><![CDATA[{username} tagged you in a <a {linkAttributes}>comment</a> on {receiverUsername}'s profile page.]]></phrase>
    <phrase title="bdtagme_x_tagged_you_in_a_comment_on_y_status" version_id="8" version_string="1.2.3"><![CDATA[{username} tagged you in a <a {linkAttributes}>comment</a> on {receiverUsername}'s status.]]></phrase>
    <phrase title="bdtagme_x_tagged_you_in_a_post_on_y_profile_page" version_id="8" version_string="1.2.3"><![CDATA[{username} tagged you in a <a {linkAttributes}>post</a> on {receiverUsername}'s profile page.]]></phrase>
    <phrase title="bdtagme_x_tagged_you_in_a_status" version_id="8" version_string="1.2.3"><![CDATA[{username} tagged you in a <a {linkAttributes}>status</a>.]]></phrase>
    <phrase title="bdtagme_x_tagged_you_in_post_y" version_id="8" version_string="1.2.3"><![CDATA[{username} tagged you in the post {title}]]></phrase>
    <phrase title="bdtagme_you_can_only_tag_x_people" version_id="8" version_string="1.2.3"><![CDATA[You can only tag {max} people. You have tagged {count} people, please remove some of them and try again...]]></phrase>
    <phrase title="bdtagme_you_have_no_permission_to_tag" version_id="25" version_string="1.5.9"><![CDATA[You don't have permission to tag people in messages.]]></phrase>
    <phrase title="option_bdtagme_alertEmail" version_id="40" version_string="1.6.6"><![CDATA[Send Alert Emails]]></phrase>
    <phrase title="option_bdtagme_alertEmail_explain" version_id="40" version_string="1.6.6"><![CDATA[Enable this option to send alert emails in addition to builtin notification system. Users still need to enable the option in /account/preferences to start receiving emails.]]></phrase>
    <phrase title="option_bdtagme_alertInBatch" version_id="30" version_string="1.6.1-dev"><![CDATA[Send Alerts in Batches]]></phrase>
    <phrase title="option_bdtagme_alertInBatch_explain" version_id="30" version_string="1.6.1-dev"><![CDATA[Enable this option to send alerts in batches (instead of one by one). This may improve performance especially when user group tagging is used frequently. However, this may have conflict with other add-ons.]]></phrase>
    <phrase title="option_bdtagme_maxUsersPerPortion" version_id="38" version_string="1.6.4"><![CDATA[Maximum Users in Processing]]></phrase>
    <phrase title="option_bdtagme_maxUsersPerPortion_explain" version_id="38" version_string="1.6.4"><![CDATA[For large site with a lot of users, you may experience performance issue when the suggestion is generated, you can now limit the number of users to process here. Please note that this may affect the tagging result. To process as many users as possible, enter 0 (zero).]]></phrase>
    <phrase title="option_bdtagme_mode" version_id="3" version_string="1.0"><![CDATA[Working Mode]]></phrase>
    <phrase title="option_bdtagme_mode_custom_tag" version_id="3" version_string="1.0"><![CDATA[BBCode Tag]]></phrase>
    <phrase title="option_bdtagme_mode_custom_tag_explain" version_id="3" version_string="1.0"><![CDATA[[bd] Tag Me: If you selected "Custom" working mode, you must specify a unique BBCode Tag for this add-on. Once setup, please don't change the tag unless you understand what you are doing...]]></phrase>
    <phrase title="option_bdtagme_mode_explain" version_id="3" version_string="1.0"><![CDATA[[bd] Tag Me: Select how you want this add-on alter the post to display tagged users. The "Custom" mode will make the link customizable via template bdtagme_tag. The "URL" mode will make use of the standard [URL] BBCode.]]></phrase>
    <phrase title="option_bdtagme_remove_prefix" version_id="2" version_string="beta 2"><![CDATA[Remove "@"]]></phrase>
    <phrase title="option_bdtagme_remove_prefix_explain" version_id="2" version_string="beta 2"><![CDATA[[bd] Tag Me: Enable this option to automatically remove the "@" symbol after a successful tag.]]></phrase>
    <phrase title="option_bdtagme_suggestionMaxLength" version_id="8" version_string="1.2.3"><![CDATA[Suggestion Maximum Length]]></phrase>
    <phrase title="option_bdtagme_suggestionMaxLength_explain" version_id="8" version_string="1.2.3"><![CDATA[The javascript suggestion (for the WYSIWYG editor and standard editors) normally supports only single-word usernames. If you want it to support multi-word usernames, you can set the maximum length of suggestion here. The script will ignore word boundary and suggest username as long as the maximum length. To let it work as normal, set this option to zero (0).]]></phrase>
    <phrase title="option_bdtagme_userGroupGravatar" version_id="25" version_string="1.5.9"><![CDATA[User Group Gravatar]]></phrase>
    <phrase title="option_bdtagme_userGroupGravatar_explain" version_id="25" version_string="1.5.9"><![CDATA[User groups will show up in suggestion list with a small image. You can use any image you want by uploading to <a href="http://gravatar.com/" tabindex="-1">Gravatar</a> and enter the email address here.]]></phrase>
    <phrase title="option_group_bdtagme" version_id="8" version_string="1.2.3"><![CDATA[[bd] Tag Me]]></phrase>
    <phrase title="option_group_bdtagme_description" version_id="8" version_string="1.2.3"><![CDATA[]]></phrase>
    <phrase title="permission_general_bdtagme_groupTag" version_id="40" version_string="1.6.6"><![CDATA[[Tag Me] Tag group]]></phrase>
    <phrase title="permission_general_bdtagme_max" version_id="40" version_string="1.6.6"><![CDATA[[Tag Me] Maximum tag/message]]></phrase>
  </phrases>
  <route_prefixes/>
  <style_properties/>
  <templates>
    <template title="alert_post_tagged" version_id="8" version_string="1.2.3"><![CDATA[{xen:phrase bdtagme_x_tagged_you_in_post_y,
	'username={xen:helper username, $user, 'subject'}',
	'title=<a href="{xen:link posts, $content}" class="PopupItemLink">{xen:helper threadPrefix, $content}{$content.title}</a>'
}]]></template>
    <template title="alert_profile_post_comment_tagged" version_id="8" version_string="1.2.3"><![CDATA[<xen:if is="{$user.user_id} == {$content.profile_user_id}">
	<xen:comment>This is a status</xen:comment>
	{xen:phrase bdtagme_x_tagged_you_in_a_comment_on_y_status,
		'username={xen:helper username, $user, 'subject'}',
		'linkAttributes=href="{xen:link profile-posts, $content}" class="PopupItemLink"',
		'receiverUsername={$content.profile_username}'
	}
<xen:else />
	<xen:comment>This is a profile post</xen:comment>
	{xen:phrase bdtagme_x_tagged_you_in_a_comment_on_y_profile_page,
		'username={xen:helper username, $user, 'subject'}',
		'linkAttributes=href="{xen:link profile-posts, $content}" class="PopupItemLink"',
		'receiverUsername={$content.profile_username}'
	}
</xen:if>]]></template>
    <template title="alert_profile_post_tagged" version_id="8" version_string="1.2.3"><![CDATA[<xen:if is="{$user.user_id} == {$content.profile_user_id}">
	<xen:comment>This is a status</xen:comment>
	{xen:phrase bdtagme_x_tagged_you_in_a_status,
		'username={xen:helper username, $user, 'subject'}',
		'linkAttributes=href="{xen:link profile-posts, $content}" class="PopupItemLink"'
	}
<xen:elseif is="{$visitor.user_id} == {$content.profile_user_id}" />
	<xen:comment>This is a profile message on the visitor's profile page.
		Actually, this will never happen because the profile_post insert
		alert will be sent first and our alert will be canceled</xen:comment>
<xen:else />
	<xen:comment>This is a profile message on someone else's profile page</xen:comment>
	{xen:phrase bdtagme_x_tagged_you_in_a_post_on_y_profile_page,
		'username={xen:helper username, $user, 'subject'}',
		'linkAttributes=href="{xen:link profile-posts, $content}" class="PopupItemLink"',
		'receiverUsername={xen:helper username, {xen:array 'user_id={$content.profile_user_id}', 'username={$content.profile_username}'}}'
	}
</xen:if>]]></template>
    <template title="bdtagme.css" version_id="27" version_string="1.6-dev"><![CDATA[.xenOverlay .bdTagMe_TaggedUserGroupMemberList { max-height: 300px; overflow-y: scroll; }]]></template>
    <template title="bdtagme_account_alerts_messages_in_threads" version_id="9" version_string="1.4"><![CDATA[<li><input type="hidden" name="alertSet[post_tagged]" value="1" />
	<label><input type="checkbox" value="1" name="alert[post_tagged]" {xen:checked "!{$alertOptOuts.post_tagged}"} /> {xen:phrase bdtagme_tags_you}</label>
	<p class="hint">{xen:phrase bdtagme_someone_tags_you_in_a_thread}</p>
</li>]]></template>
    <template title="bdtagme_account_alerts_messages_on_profile_pages" version_id="9" version_string="1.4"><![CDATA[<li><input type="hidden" name="alertSet[profile_post_tagged]" value="1" />
	<label><input type="checkbox" value="1" name="alert[profile_post_tagged]" {xen:checked "!{$alertOptOuts.profile_post_tagged}"} /> {xen:phrase bdtagme_tags_you}</label>
	<p class="hint">{xen:phrase bdtagme_someone_tags_you_in_a_profile_post}</p>
</li>
<li><input type="hidden" name="alertSet[profile_post_comment_tagged]" value="1" />
	<label><input type="checkbox" value="1" name="alert[profile_post_comment_tagged]" {xen:checked "!{$alertOptOuts.profile_post_comment_tagged}"} /> {xen:phrase bdtagme_tags_you_in_a_comment}</label>
	<p class="hint">{xen:phrase bdtagme_someone_tags_you_in_a_comment_on_a_profile_post}</p>
</li>]]></template>
    <template title="bdtagme_account_contact_details_messaging" version_id="41" version_string="1.7"><![CDATA[<xen:if is="{xen:helper bdTagMe_option, alertEmail}">
	<li><label for="ctrl_bdtagme_email"><input type="checkbox" name="bdtagme_email" value="1" id="ctrl_bdtagme_email" {xen:checked '{$visitor.bdtagme_email}'} />
		{xen:phrase bdtagme_receive_email_when_tagged}</label>
		<p class="hint">{xen:phrase bdtagme_receive_email_when_tagged_explain}</p>
	</li>
</xen:if>]]></template>
    <template title="bdtagme_editor" version_id="44" version_string="1.7.2b"><![CDATA[<xen:require js="js/bdTagMe/tinymce_plugin.js" />
<script type="text/javascript">
!function($, window, document, _undefined) {
	XenForo.bdTagMe_enabledTemplates = [
		'post_edit',
		'post_edit_inline', // this one is not needed actually
		'thread_create',
		'thread_view',
		'thread_reply',
		<xen:hook name="bdtagme_enabled_templates" />
	];
} (jQuery, this, document);
</script>]]></template>
    <template title="bdtagme_members_tagged_user_group" version_id="27" version_string="1.6-dev"><![CDATA[<xen:title>{$userGroup.title}</xen:title>

<xen:require css="member_list.css" />
<xen:require css="xenforo_member_list_item.css" />
<xen:require css="bdtagme.css" />
	
<div class="section">
	<ol class="memberList bdTagMe_TaggedUserGroupMemberList">
		<xen:foreach loop="$users" value="$user">
			<xen:include template="member_list_item">
				<xen:set var="$noOverlay">1</xen:set>
			</xen:include>
		</xen:foreach>
	</ol>
</div>]]></template>
    <template title="bdtagme_PAGE_CONTAINER" version_id="39" version_string="1.6.5"><![CDATA[<xen:if is="{$visitor.user_id} > 0">
<xen:require js="js/bdTagMe/frontend.js" />

<script type="text/javascript">
!function($, window, document, _undefined) {
	XenForo.bdTagMe_suggestionMaxLength = {xen:calc '0 + {xen:helper bdTagMe_option, suggestionMaxLength}'};
} (jQuery, this, document);
</script>
</xen:if>]]></template>
    <template title="bdtagme_tag" version_id="41" version_string="1.7"><![CDATA[<xen:comment>It's important to NOT break line in this template. You have been warned!</xen:comment>{xen:if '!{$removePrefix}', '@'}<xen:if is="{$entity.entity_link}">{xen:raw $entity.entity_link}<xen:else /><xen:if is="{$entity.entity_type} == 'user'"><a href="{xen:link members, {xen:array 'user_id={$entity.entity_id}', 'username={$entity.entity_text}'}}" class="username bdTagMe_TaggedUser">{$entity.entity_text}</a><xen:elseif is="{$entity.entity_type} == 'user_group'" /><a href="{xen:link 'members/tagged', $entity}" class="OverlayTrigger bdTagMe_TaggedUserGroup">{$entity.entity_text}</a><xen:else />{$entity.entity_text}</xen:if></xen:if>]]></template>
  </templates>
  <bb_code_media_sites/>
  <template_modifications/>
</addon>
